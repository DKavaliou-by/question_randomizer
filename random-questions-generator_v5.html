<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Questions Generator</title>
    <style>
        body { font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; }
        .container { display: flex; width: 80%; max-width: 900px; }
        .questions-panel, .controls-panel { padding: 20px; }
        .questions-panel { width: 60%; border-right: 1px solid #ccc; }
        .controls-panel { width: 40%; }
        .question-card { border: 1px solid #ddd; padding: 10px; margin: 10px 0; cursor: pointer; }
        .question-card .answer { display: none; }
        .question-card.flipped .answer { display: block; }
        .question-card.flipped .text { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="questions-panel" id="questionsPanel"></div>
        <div class="controls-panel">
            <input type="file" id="fileInput" accept="application/json">
            <label>Number of Questions: <span id="questionCount">5</span></label>
            <input type="range" min="1" max="10" value="5" id="slider">
            <select id="themeSelect" multiple></select>
            <button onclick="generateQuestions()">Generate</button>
        </div>
    </div>

    <script>
        let questions = [];
        document.getElementById('slider').addEventListener('input', function() {
            document.getElementById('questionCount').textContent = this.value;
        });

        document.getElementById('fileInput').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        questions = JSON.parse(e.target.result);
                        populateThemes();
                    } catch (error) {
                        alert("Invalid JSON file");
                    }
                };
                reader.readAsText(file);
            }
        });

        function populateThemes() {
            const themes = [...new Set(questions.map(q => q.theme))];
            const themeSelect = document.getElementById('themeSelect');
            themeSelect.innerHTML = '';
            themes.forEach(theme => {
                const option = document.createElement('option');
                option.value = theme;
                option.textContent = theme;
                themeSelect.appendChild(option);
            });
        }

        function generateQuestions() {
            const count = parseInt(document.getElementById('slider').value, 10);
            const selectedThemes = Array.from(document.getElementById('themeSelect').selectedOptions).map(o => o.value);
            let filteredQuestions = questions.filter(q => selectedThemes.includes(q.theme));
            
            if (filteredQuestions.length < count) {
                alert("Not enough questions in selected themes");
                return;
            }
            
            filteredQuestions = filteredQuestions.sort(() => 0.5 - Math.random()).slice(0, count);
            displayQuestions(filteredQuestions);
        }

        function displayQuestions(questions) {
            const panel = document.getElementById('questionsPanel');
            panel.innerHTML = '';
            questions.forEach(q => {
                const card = document.createElement('div');
                card.className = 'question-card';
                card.innerHTML = `<div class='text'>${q.text} <br> <small>(${q.theme})</small></div><div class='answer'>${q.answer}</div>`;
                card.addEventListener('click', () => card.classList.toggle('flipped'));
                panel.appendChild(card);
            });
        }
    </script>
</body>
</html>
